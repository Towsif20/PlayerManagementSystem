<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Create Match</title>
    <!--    <link rel="stylesheet" href="../static/bootstrap.min.css">-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

</head>

<body>
<div class="container mt-5">
    <h2 th:text="${update == null} ? 'Create Match' : 'Update Match'" class="text-center mb-4"></h2>

    <!-- Match creation form -->
    <form action="#" th:action="@{/matches/save}" th:object="${match}", method="POST">

        <input type="hidden" th:field="*{id}" />

        <input type="text" th:field="*{venue}"
               placeholder="Match Venue" class="form-control mb-4 col-4">

        <input type="date" th:field="*{date}"
               class="form-control mb-4 col-4">

        <select class="custom-select form-control mb-4" th:field="*{matchType}">
            <option th:value="'ODI'" th:text="ODI"></option>
            <option th:value="'TEST'" th:text="TEST"></option>
            <option th:value="'T20'" th:text="T20"></option>
        </select>

        <select id="homeTeam" name="homeTeam" required onchange="updatePlayers('homeTeam')" class="custom-select form-control mb-4" th:field="*{homeTeam}">
            <option value="0">select home team</option>
            <option th:each="team : ${teams}" th:value="${team.id}" th:text="${team.name}"></option>
        </select>

        <!-- Available Players List -->
        <label for="availablePlayersList">Available Players:</label>
        <ul id="availablePlayersList">
            <!-- Populate with available players from your model -->
        </ul>

        <!-- Add All Players Button -->
        <button type="button" onclick="addAllPlayers()">Add All</button>

        <!-- Selected Players List -->
        <label for="selectedPlayersList">Selected Players:</label>
        <ul id="selectedPlayersList">
            <!-- Selected players will be dynamically added here using JavaScript -->
        </ul>

        <input type="hidden" th:field="*{players}" id="selectedPlayersHidden">

        <select class="custom-select form-control mb-4" th:field="*{awayTeam}">
            <option value="0">select away team</option>
            <option th:each="team : ${teams}" th:value="${team.id}" th:text="${team.name}"></option>
        </select>

        <button type="submit" class="btn btn-info col-2"
        th:text="${update == null} ? Save : Update">
        </button>
    </form>
</div>

<!-- Add Bootstrap JS and Popper.js scripts (required for Bootstrap) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script th:src="@{/js/matchCreation.js}"></script>
<!-- Your custom JavaScript scripts or links here -->
<!--<script>-->
<!--    // JavaScript function to update the list of players based on the selected team-->
<!--    function updatePlayers(teamId) {-->
<!--        var selectedTeamId = document.getElementById(teamId).value;-->
<!--        var playersList = document.getElementById("playersList");-->

<!--        // Clear the current list of players-->
<!--        playersList.innerHTML = '';-->

<!--        // Fetch the players for the selected team using AJAX-->
<!--        $.ajax({-->
<!--            url: '/teams/' + selectedTeamId + '/playersResponseBody',-->
<!--            type: 'GET',-->
<!--            success: function(data) {-->
<!--                // Populate the players in the list-->
<!--                data.forEach(function(player) {-->
<!--                    var newPlayerInput = document.createElement("li");-->
<!--                    newPlayerInput.innerHTML = '<input type="text" name="players" value="' + player.name + '" readonly>' +-->
<!--                    '<button type="button" onclick="removePlayer(this)">Remove</button>';-->
<!--                    playersList.appendChild(newPlayerInput);-->
<!--                });-->
<!--            }-->
<!--        });-->
<!--    }-->

<!--    // JavaScript function to add a new player input field-->
<!--    function addPlayer() {-->
<!--        // Add logic to check if the player already exists in the list-->
<!--        // ...-->

<!--        var playersList = document.getElementById("playersList");-->
<!--        var newPlayerInput = document.createElement("li");-->
<!--        newPlayerInput.innerHTML = '<input type="text" name="players" placeholder="Player Name">' +-->
<!--        '<button type="button" onclick="removePlayer(this)">Remove</button>';-->

<!--        playersList.appendChild(newPlayerInput);-->
<!--    }-->

<!--    // JavaScript function to remove a player input field-->
<!--    function removePlayer(button) {-->
<!--        var playerInput = button.parentElement;-->
<!--        playerInput.remove();-->
<!--    }-->
<!--</script>-->

</body>
</html>